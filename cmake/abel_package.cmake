include (InstallRequiredSystemLibraries)
include(abel_debug)
include(abel_package_generator)
include(abel_pkg_dump)

set(PROJECT_PACKAGE_DESCRIPTION_SUMMARY ${CMAKE_PROJECT_DESCRIPTION})

SET (CPACK_RESOURCE_FILE_LICENSE   "${PROJECT_SOURCE_DIR}/LICENSE")
SET (CPACK_RESOURCE_FILE_README    "${PROJECT_SOURCE_DIR}/README.md")
SET (CPACK_PACKAGE_CONTACT ${AUTHOR_MAIL})
SET (CPACK_PACKAGE_DESCRIPTION_SUMMARY "${PROJECT_PACKAGE_DESCRIPTION_SUMMARY}" )
SET (CPACK_PACKAGE_DESCRIPTION_FILE "${PROJECT_BINARY_DIR}/package/${PROJECT_NAME}.pc" )

include(abel_package_generator)

set (CPACK_GENERATOR ${ABEL_GENERATOR})

abel_print(${ABEL_GENERATOR})

set (CPACK_PACKAGING_INSTALL_PREFIX ${CMAKE_INSTALL_PREFIX})
set (CPACK_PACKAGE_VERSION_MAJOR "${PROJECT_VERSION_MAJOR}")
set (CPACK_PACKAGE_VERSION_MINOR "${PROJECT_VERSION_MINOR}")
set (CPACK_PACKAGE_VERSION_PATCH "${PROJECT_VERSION_PATCH}")
set(CPACK_OUTPUT_FILE_PREFIX ${PROJECT_BINARY_DIR}/package)
set(CPACK_PACKAGE_NAME "${PROJECT_NAME}")

string(TOLOWER ${CMAKE_BUILD_TYPE} BUILD_STRING)

string(TOLOWER ${CMAKE_HOST_SYSTEM_NAME} HOST_SYSTEM_NAME)

set(CPACK_PACKAGE_FILE_NAME
        ${CPACK_PACKAGE_NAME}-${HOST_SYSTEM_NAME}-${CMAKE_PROJECT_VERSION}-${CMAKE_SYSTEM_PROCESSOR}-${BUILD_STRING})
abel_print("abel_package.cmake name ${CPACK_PACKAGE_FILE_NAME}")
include (CPack)